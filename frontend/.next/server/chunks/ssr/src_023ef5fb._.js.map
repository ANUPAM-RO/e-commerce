{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/ecommerce-nextjs-app/frontend/src/components/Cart.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Table, Button, message, Modal, Form, Input } from 'antd';\r\nimport { DeleteOutlined, ShoppingCartOutlined, ArrowLeftOutlined } from '@ant-design/icons';\r\nimport { useCart } from '@/context/CartContext';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport axios from 'axios';\r\nimport Link from 'next/link';\r\n\r\nconst Cart: React.FC = () => {\r\n  const { cart, removeFromCart, clearCart } = useCart();\r\n  const { user } = useAuth();\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    if (isModalOpen && user) {\r\n      form.setFieldsValue({\r\n        email: user.email,\r\n      });\r\n    }\r\n  }, [isModalOpen, user, form]);\r\n\r\n  const handleCheckout = async (values: any) => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        throw new Error('No authentication token found');\r\n      }\r\n\r\n      // First, create or update customer\r\n      const customerData = {\r\n        ...values,\r\n        userId: user?.id\r\n      };\r\n\r\n      const customerResponse = await axios.post(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/customers`,\r\n        customerData,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        }\r\n      );\r\n      \r\n      const customerId = customerResponse.data.id;\r\n\r\n      // Then create the order\r\n      const orderData = {\r\n        customerId,\r\n        items: cart.map(item => ({\r\n          productId: item.id,\r\n          quantity: item.quantity\r\n        }))\r\n      };\r\n\r\n      await axios.post(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/orders`,\r\n        orderData,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        }\r\n      );\r\n      \r\n      message.success('Order placed successfully!');\r\n      clearCart();\r\n      setIsModalOpen(false);\r\n      form.resetFields();\r\n    } catch (error) {\r\n      console.error('Checkout error:', error);\r\n      message.error('Failed to place order. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Product',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      width: '40%',\r\n    },\r\n    {\r\n      title: 'Price',\r\n      dataIndex: 'price',\r\n      key: 'price',\r\n      width: '20%',\r\n      render: (price: number) => `$${price}`,\r\n    },\r\n    {\r\n      title: 'Quantity',\r\n      dataIndex: 'quantity',\r\n      key: 'quantity',\r\n      width: '20%',\r\n    },\r\n    {\r\n      title: 'Subtotal',\r\n      key: 'subtotal',\r\n      width: '20%',\r\n      render: (record: any) => `$${(record.price * record.quantity)}`,\r\n    },\r\n    {\r\n      title: 'Action',\r\n      key: 'action',\r\n      width: '10%',\r\n      render: (record: any) => (\r\n        <Button\r\n          type=\"text\"\r\n          danger\r\n          icon={<DeleteOutlined />}\r\n          onClick={() => removeFromCart(record.id)}\r\n          className=\"hover:bg-red-50\"\r\n        />\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\r\n        <div className=\"p-6\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">Shopping Cart</h1>\r\n            <Link href=\"/\">\r\n              <Button \r\n                icon={<ArrowLeftOutlined />}\r\n                className=\"flex items-center text-gray-600 hover:text-gray-900\"\r\n              >\r\n                Continue Shopping\r\n              </Button>\r\n            </Link>\r\n          </div>\r\n\r\n          {cart.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <ShoppingCartOutlined className=\"text-6xl text-gray-400 mb-4\" />\r\n              <p className=\"text-xl text-gray-500\">Your cart is empty</p>\r\n              <Link href=\"/\">\r\n                <Button type=\"primary\" className=\"mt-4\">\r\n                  Start Shopping\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <Table\r\n                columns={columns}\r\n                dataSource={cart}\r\n                rowKey=\"id\"\r\n                pagination={false}\r\n                className=\"mb-6\"\r\n              />\r\n              <div className=\"border-t border-gray-200 pt-6\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <div className=\"text-xl font-bold text-gray-900\">\r\n                    Total: ${total}\r\n                  </div>\r\n                  <Button\r\n                    type=\"primary\"\r\n                    size=\"large\"\r\n                    onClick={() => setIsModalOpen(true)}\r\n                    className=\"bg-blue-600 hover:bg-blue-700\"\r\n                  >\r\n                    Proceed to Checkout\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <Modal\r\n        title=\"Enter Your Details\"\r\n        open={isModalOpen}\r\n        onCancel={() => {\r\n          setIsModalOpen(false);\r\n          form.resetFields();\r\n        }}\r\n        footer={null}\r\n        width={600}\r\n      >\r\n        <Form\r\n          form={form}\r\n          layout=\"vertical\"\r\n          onFinish={handleCheckout}\r\n          className=\"mt-4\"\r\n        >\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            {/* <Form.Item\r\n              name=\"Name\"\r\n              label=\"Name\"\r\n              rules={[{ required: true, message: 'Please enter your name' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item> */}\r\n                    <Form.Item\r\n            name=\"email\"\r\n            label=\"Email\"\r\n            rules={[\r\n              { required: true, message: 'Please enter your email' },\r\n              { type: 'email', message: 'Please enter a valid email' }\r\n            ]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n             <Form.Item\r\n            name=\"phone\"\r\n            label=\"Phone\"\r\n            rules={[{ required: true, message: 'Please enter your phone number' }]}\r\n          >\r\n            <Input />\r\n            \r\n          </Form.Item>\r\n          </div>\r\n          <Form.Item\r\n            name=\"address\"\r\n            label=\"Address\"\r\n            rules={[{ required: true, message: 'Please enter your address' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <Form.Item\r\n              name=\"city\"\r\n              label=\"City\"\r\n              rules={[{ required: true, message: 'Please enter your city' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              name=\"state\"\r\n              label=\"State\"\r\n              rules={[{ required: true, message: 'Please enter your state' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <Form.Item\r\n              name=\"zipCode\"\r\n              label=\"ZIP Code\"\r\n              rules={[{ required: true, message: 'Please enter your ZIP code' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              name=\"country\"\r\n              label=\"Country\"\r\n              rules={[{ required: true, message: 'Please enter your country' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n          </div>\r\n\r\n          <Form.Item className=\"mt-6\">\r\n            <Button \r\n              type=\"primary\" \r\n              htmlType=\"submit\" \r\n              loading={loading} \r\n              block\r\n              className=\"bg-blue-600 hover:bg-blue-700\"\r\n            >\r\n              Place Order\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 517, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/ecommerce-nextjs-app/frontend/src/pages/cart.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Layout } from '@/components/Layout';\r\nimport Cart from '@/components/Cart';\r\n\r\nconst CartPage: React.FC = () => {\r\n  return (\r\n    <>\r\n      <Cart />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CartPage; "],"names":[],"mappings":";;;;AAEA;;;;;;;AAEA,MAAM,WAAqB;IACzB,qBACE;kBACE,cAAA,qKAAC,mHAAA,CAAA,UAAI;;;;;;AAGX;uCAEe","debugId":null}}]
}