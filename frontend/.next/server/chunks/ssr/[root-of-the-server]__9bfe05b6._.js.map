{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/ecommerce-nextjs-app/frontend/src/pages/products/%5Bid%5D.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useCart } from '../../context/CartContext';\r\nimport Link from 'next/link';\r\nimport { FaArrowLeft, FaShoppingCart, FaHeart, FaShare, FaStar } from 'react-icons/fa';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface Product {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  stock: number;\r\n  isActive: boolean;\r\n  image?: string;\r\n}\r\n\r\nexport default function ProductDetail() {\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [showSuccess, setShowSuccess] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState<string | null>(null);\r\n  const router = useRouter();\r\n  const { id } = router.query;\r\n  const { isAuthenticated } = useAuth();\r\n  const { addItem } = useCart();\r\n\r\n  useEffect(() => {\r\n    if (!id) return;\r\n\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:3001/api/products/${id}`);\r\n        setProduct(response.data);\r\n        setSelectedImage(response.data.image);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Error fetching product:', error);\r\n        setError('Failed to load product details');\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const handleAddToCart = () => {\r\n    if (!product) return;\r\n    \r\n    if (!isAuthenticated) {\r\n      router.push('/login');\r\n      return;\r\n    }\r\n\r\n    addItem({\r\n      id: product.id,\r\n      name: product.name,\r\n      price: product.price,\r\n      stock: product.stock,\r\n      quantity: quantity\r\n    });\r\n\r\n    setShowSuccess(true);\r\n    setTimeout(() => setShowSuccess(false), 3000);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !product) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">{error || 'Product not found'}</h2>\r\n          <Link href=\"/\">\r\n            <button className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700\">\r\n              Back to Products\r\n            </button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Success Message */}\r\n        {showSuccess && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -20 }}\r\n            className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between\"\r\n          >\r\n            <div className=\"flex items-center\">\r\n              <FaShoppingCart className=\"text-green-500 mr-2\" />\r\n              <span className=\"text-green-700\">Product added to cart successfully!</span>\r\n            </div>\r\n            <Link href=\"/cart\">\r\n              <button className=\"text-green-700 hover:text-green-900 font-medium\">\r\n                View Cart\r\n              </button>\r\n            </Link>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Back Button */}\r\n        <Link href=\"/\">\r\n          <button className=\"inline-flex items-center text-gray-600 hover:text-gray-900 mb-6\">\r\n            <FaArrowLeft className=\"mr-2\" />\r\n            Back to Products\r\n          </button>\r\n        </Link>\r\n\r\n        <div className=\"bg-white rounded-2xl shadow-xl overflow-hidden\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 p-8\">\r\n            {/* Product Image Section */}\r\n            <div className=\"space-y-4\">\r\n              <div className=\"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-xl bg-gray-100\">\r\n                {selectedImage ? (\r\n                  <img\r\n                    src={selectedImage}\r\n                    alt={product.name}\r\n                    className=\"w-full h-full object-cover object-center\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-full h-full flex items-center justify-center bg-gray-200\">\r\n                    <span className=\"text-gray-400\">No image available</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {product.image && (\r\n                <div className=\"grid grid-cols-4 gap-4\">\r\n                  <button\r\n                    onClick={() => setSelectedImage(product.image)}\r\n                    className={`aspect-w-1 aspect-h-1 rounded-lg overflow-hidden ${\r\n                      selectedImage === product.image ? 'ring-2 ring-indigo-500' : ''\r\n                    }`}\r\n                  >\r\n                    <img\r\n                      src={product.image}\r\n                      alt={product.name}\r\n                      className=\"w-full h-full object-cover object-center\"\r\n                    />\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Product Info Section */}\r\n            <div className=\"space-y-6\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-gray-900\">{product.name}</h1>\r\n                <div className=\"mt-2 flex items-center\">\r\n                  <div className=\"flex items-center\">\r\n                    {[1, 2, 3, 4, 5].map((star) => (\r\n                      <FaStar\r\n                        key={star}\r\n                        className={`h-5 w-5 ${\r\n                          star <= 4 ? 'text-yellow-400' : 'text-gray-300'\r\n                        }`}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                  <span className=\"ml-2 text-sm text-gray-500\">(24 reviews)</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <p className=\"text-3xl font-bold text-indigo-600\">${product.price}</p>\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <button className=\"p-2 text-gray-400 hover:text-red-500 transition-colors\">\r\n                    <FaHeart className=\"h-6 w-6\" />\r\n                  </button>\r\n                  <button className=\"p-2 text-gray-400 hover:text-indigo-500 transition-colors\">\r\n                    <FaShare className=\"h-6 w-6\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"border-t border-gray-200 pt-6\">\r\n                <h3 className=\"text-lg font-medium text-gray-900\">Description</h3>\r\n                <p className=\"mt-2 text-gray-600\">{product.description}</p>\r\n              </div>\r\n\r\n              <div className=\"border-t border-gray-200 pt-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"text-lg font-medium text-gray-900\">Availability</h3>\r\n                  <span className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                    product.stock > 0\r\n                      ? 'bg-green-100 text-green-800'\r\n                      : 'bg-red-100 text-red-800'\r\n                  }`}>\r\n                    {product.stock > 0 ? `${product.stock} units in stock` : 'Out of stock'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {product.stock > 0 && (\r\n                <div className=\"border-t border-gray-200 pt-6\">\r\n                  <label htmlFor=\"quantity\" className=\"block text-sm font-medium text-gray-700\">\r\n                    Quantity\r\n                  </label>\r\n                  <select\r\n                    id=\"quantity\"\r\n                    value={quantity}\r\n                    onChange={(e) => setQuantity(Number(e.target.value))}\r\n                    className=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\r\n                  >\r\n                    {[...Array(Math.min(10, product.stock))].map((_, i) => (\r\n                      <option key={i + 1} value={i + 1}>\r\n                        {i + 1}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"border-t border-gray-200 pt-6\">\r\n                <div className=\"flex space-x-4\">\r\n                  <button\r\n                    onClick={handleAddToCart}\r\n                    disabled={product.stock === 0}\r\n                    className={`flex-1 flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white ${\r\n                      product.stock === 0\r\n                        ? 'bg-gray-400 cursor-not-allowed'\r\n                        : 'bg-indigo-600 hover:bg-indigo-700'\r\n                    }`}\r\n                  >\r\n                    <FaShoppingCart className=\"mr-2\" />\r\n                    {product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}\r\n                  </button>\r\n                  <Link href=\"/cart\">\r\n                    <button className=\"flex-1 flex items-center justify-center px-6 py-3 border border-indigo-600 rounded-md shadow-sm text-base font-medium text-indigo-600 bg-white hover:bg-indigo-50\">\r\n                      View Cart\r\n                    </button>\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}